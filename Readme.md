# Скрипты для резервного копирования USB накопителя

Скрипты:

- [register_USB_insert](register_USB_insert.cmd) регистрирует в windows запуск скрипта при установке USB накопителя с определенным id устройства
- [backup_flash](backup_flash.cmd) запускает архиватор rar для архивирования содержимого накопителя.
Файлы и каталоги с атрибутом __системный__ не архивируются
- [save_to_remotes](save_to_remotes.cmd) копирует созданные архивы на удаленные компьютеры.
Настройки удаленных компьютеров в начале скрипта.
- [set_sheduler](set_sheduler.cmd) создает задачу в планировщике заданий запуска скрипта `register_USB_insert.cmd` на событие __ONSTART__

> Программа [USBPlugEvent.exe](https://github.com/initmaster/USBPlugEvent) умеет регистрировать события
установки и снятия USB устройства. см. [USBPlugEvent.md](USBPlugEvent.md)

список актуальных файлов на флешке в `current.filelist`

TODO: Регистрация задачи запуска резервного копирования при установке USB накопителя
TODO: Запускать скрипт `backup_flash` автоматически при установке флешки в порт  
TODO: `save_to_remotes` копирует файлы `scp` на `ssh` сервер с настроенным беспарольным входом
TODO: Удаление старых файлов на удаленных серверах
TODO: `save_to_remotes` запускается периодически, проверяет доступность удаленных каталогов и раз в день выполняет копирование
